---
title: "Airline Loyalty Causal Inference"
format: revealjs
license: "CC BY-SA 4.0"
---

## Milestone 1: Context
Does having a loyalty card status (Star, Nova, Aurora) cause an increase in CLV?

I'm investigating whether attaining a loyalty card status with an airline impacts CLV. Customer Lifetime Value (CLV) is calculated as the total revenue generated by a customer from flight bookings throughout their membership period. Basically, it represents the expected total revenue from a given customer.

I believe that having a loyalty card increases CLV.

## Milestone 2: Data Story

- About the dataset: https://www.kaggle.com/datasets/agungpambudi/airline-loyalty-campaign-program-impact-on-flights/data

- The outcome would be positive and continuous values because itâ€™s how much revenue is expected to be made under the CLV. Other predictor variables that could influence CLV is salary, education level, marital status, total flights, and enrollment year/month. Other variables that could influence our outcome could be country of residence, gender, distance traveled, points redeemed, and dollar cost of points redeemed.

## Milestone 3: DAG

![](../figures/DAG_CLV.jpg){width=100%}

## Milestone 4: Identification Strategy

- There were a total of 23 different paths (irrespective of arrow directionality) from Loyalty Card Status to CLV.

- Identified backdoor paths and created adjustment set.

- In order to do causal inference, my model will need to include: Loyalty Card Status, CLV, Income, Travel Frequency, Company Marketing Strategy, and Customer Engagement. (These last 4 will need to be conditioned on.)

## Milestone 5: Simulate Data and Recover Parameters

- Step 1: Import needed libraries.

- Step 2: Define variables and set them equal to a value.

- Step 3: Simulate predictors randomly using uniform distributions. Use predictors and parameter values to simulate the outcome in multiple linear regression format.

- Step 4: Create and train the linear regression model.

- Step 5: Have you recovered the parameters?

Next slide has code & results

## Parameters I set matched what I got back

![](../figures/parameters.png){width=100%}

## Milestone 6: EDA

![](../figures/clv_histogram.png){width=100%}

##

![](../figures/enrollment_type_bar_chart.png){width=100%}

##

![](../figures/loyalty_card_distribution_bar_chart.png){width=100%}

##

![](../figures/salary_histogram.png){width=100%}

## Milestone 7: Estimate Causal Effects

What my code does:

- Defines a Bayesian regression model where CLV is predicted using the generated features.

- Uses normal priors for the intercept and regression coefficients.

- Uses a half-normal prior for the noise (sigma).

- Estimates the posterior distribution of model parameters using MCMC sampling.

- Summarizes the posterior distributions of parameters and plots the marginal posterior distributions.

## 
![](../figures/results_from_trial.png){width=100%}

## 
Causality:

This code does not estimate causal effects directly. This is a Bayesian regression model, but it only captures associations, not causal effects.

How do I estimate causal effect? I think I'm confused on milestone 7.